é€™æ˜¯ä¸€ä»½ç‚ºæ‚¨æ•´ç†å¥½çš„å®Œæ•´ Markdown æ ¼å¼å ±å‘Šï¼ŒåŒ…å«äº†**å¯¦é©—åˆ†æ**ã€**è¦–è¦ºåŒ–æ¯”å°ç¨‹å¼ç¢¼**ä»¥åŠ**æ¨¡å‹éƒ¨ç½²æŒ‡ä»¤**ã€‚æ‚¨å¯ä»¥ç›´æ¥è¤‡è£½å…§å®¹ä¿å­˜ç‚º `.md` æª”æ¡ˆï¼Œæˆ–æ˜¯è½‰å­˜ç‚º PDF æäº¤ã€‚

-----

# ğŸ’ å°ç£ç¼çŒ´åµæ¸¬ç³»çµ±ï¼šåŠç›£ç£å­¸ç¿’ (Semi-SL) æ•ˆèƒ½å„ªåŒ–å ±å‘Š

**å°ˆæ¡ˆåç¨±**ï¼šWildlife Detection - Macaque Defense System
**æ—¥æœŸ**ï¼š2025-11-20
**æ¨¡å‹æ¶æ§‹**ï¼šYOLO12s
**ç¡¬é«”ç’°å¢ƒ**ï¼šNVIDIA GeForce RTX 5090
**å¯¦é©—æ–¹æ³•**ï¼šç›£ç£å¼å­¸ç¿’ (Baseline) + 3 è¼ªåŠç›£ç£è‡ªæˆ‘è¨“ç·´ (Self-Training)

-----

## 1\. æ‘˜è¦ (Executive Summary)

æœ¬å°ˆæ¡ˆæ—¨åœ¨æå‡å°ç£ç¼çŒ´åµæ¸¬ç³»çµ±çš„æº–ç¢ºåº¦èˆ‡å¬å›ç‡ï¼Œä»¥å„ªåŒ–è‡ªå‹•åŒ–é©…é›¢ç³»çµ±çš„æ•ˆèƒ½ã€‚é‘‘æ–¼äººå·¥æ¨™è¨»æ•¸æ“šçš„é«˜æ˜‚æˆæœ¬ï¼Œæˆ‘å€‘æ¡ç”¨äº†\*\*åŠç›£ç£å­¸ç¿’ï¼ˆSemi-Supervised Learning, SSLï¼‰\*\*ç­–ç•¥ï¼Œåˆ©ç”¨æœªæ¨™è¨»æ•¸æ“šé€²è¡Œä¸‰è¼ªè¿­ä»£è¨“ç·´ã€‚

**æœ€çµ‚æˆæœ**ï¼š
ç¶“éä¸‰è¼ªè¿­ä»£ï¼Œæ¨¡å‹åœ¨**å®šä½ç²¾æº–åº¦ (mAP@50-95)** èˆ‡ **å¬å›ç‡ (Recall)** ä¸Šå‡è¶…è¶Šäº†å…¨ç›£ç£å­¸ç¿’çš„åŸºæº–ç·šã€‚æœ€çµ‚æ¨¡å‹ï¼ˆRound 3ï¼‰è­‰æ˜äº†ç³»çµ±èƒ½æœ‰æ•ˆæŒ–æ˜æ½›åœ¨çš„å›°é›£æ¨£æœ¬ï¼Œé¡¯è‘—é™ä½æ¼æª¢ç‡ã€‚

-----

## 2\. é—œéµæ•¸æ“šå°æ¯” (Performance Metrics)

ä¸‹è¡¨å±•ç¤ºäº†å¾åŸºæº–ç·šåˆ°ç¬¬ä¸‰è¼ªåŠç›£ç£å­¸ç¿’çš„æŒ‡æ¨™è®ŠåŒ–è¶¨å‹¢ã€‚

| å¯¦é©—éšæ®µ | æ¨¡å‹ç‰ˆæœ¬ | Precision (P)<br>æº–ç¢ºç‡ | Recall (R)<br>å¬å›ç‡ | mAP@50<br>åµæ¸¬èƒ½åŠ› | mAP@50-95<br>å®šä½ç²¾åº¦ | ç‹€æ…‹è©•ä¼° |
| :--- | :--- | :---: | :---: | :---: | :---: | :--- |
| **Baseline** | Supervised | **0.939** | 0.881 | 0.931 | 0.731 | **é«˜æ¨™ç«¿èµ·é»** |
| **Round 1** | Semi-SL R1 | 0.928 (â–¼) | 0.852 (â–¼) | 0.933 (â–²) | 0.731 (-) | **éœ‡ç›ªæœŸ** (å¼•å…¥é›œè¨Š) |
| **Round 2** | Semi-SL R2 | 0.930 (â–²) | 0.864 (â–²) | **0.934** (â–²) | 0.734 (â–²) | **æœ€ä½³å¹³è¡¡é»** (Balanced) |
| **Round 3** | Semi-SL R3 | 0.911 (â–¼) | **0.882** (â–²) | 0.931 (â–¼) | **0.736** (â–²) | **é«˜å¬å›/é«˜å®šä½ç‰¹åŒ–** |

-----

## 3\. æ·±åº¦è¶¨å‹¢åˆ†æ (Trend Analysis)

### A. å®šä½èƒ½åŠ›çš„æŒçºŒé€²åŒ– (Bounding Box Regression)

  * **æ•¸æ“š**ï¼šmAP@50-95 å¾ Baseline çš„ 0.731 ä¸€è·¯æ”€å‡è‡³ Round 3 çš„ **0.736**ã€‚
  * **åˆ†æ**ï¼šé€™ä»£è¡¨æ¨¡å‹ä¸åƒ…åƒ…æ˜¯ã€Œçœ‹åˆ°ã€çŒ´å­ï¼Œå…¶é æ¸¬æ¡†èˆ‡çœŸå¯¦çŒ´å­çš„è¼ªå»“**è²¼åˆåº¦è¶Šä¾†è¶Šé«˜**ã€‚
  * **æ‡‰ç”¨åƒ¹å€¼**ï¼šå°æ–¼éœ€è¦ç²¾ç¢ºåº§æ¨™çš„æ‡‰ç”¨ï¼ˆå¦‚é›·å°„é©…é›¢ç³»çµ±ï¼‰ï¼Œé€™èƒ½æœ‰æ•ˆæ¸›å°‘ç„æº–èª¤å·®ï¼Œæå‡é©…é›¢æˆåŠŸç‡ã€‚

### B. å¬å›ç‡çš„ U å‹åè½‰ (The U-Curve of Recall)

  * **ç¾è±¡**ï¼šRound 1 å› å½æ¨™ç±¤åˆæœŸå«æœ‰é›œè¨Šï¼ŒRecall ä¸‹æ»‘è‡³ 0.852ã€‚ç„¶è€Œï¼Œéš¨è‘—æ¨¡å‹åœ¨ Round 2 èˆ‡ Round 3 ä¸­åè¦†ã€Œè‡ªæˆ‘ä¿®æ­£ã€ï¼ŒRecall å¼·å‹¢åå½ˆä¸¦åœ¨ Round 3 å‰µä¸‹ **0.882** çš„æ–°é«˜ã€‚
  * **çµè«–**ï¼šåŠç›£ç£æµç¨‹æˆåŠŸè®“æ¨¡å‹å­¸æœƒè¾¨è­˜é‚£äº›åœ¨ Baseline éšæ®µæœƒè¢«å¿½ç•¥çš„ã€Œå›°é›£æ¨£æœ¬ã€ï¼ˆHard Examplesï¼‰ï¼Œå¤§å¹…é™ä½æ¼ç¶²ä¹‹é­šã€‚

### C. æº–ç¢ºç‡çš„æ¬Šè¡¡ (Precision Trade-off)

  * **ç¾è±¡**ï¼šPrecision åœ¨ Round 3 ä¸‹æ»‘è‡³ 0.911ã€‚
  * **å°ç­–**ï¼šé€™æ˜¯è¿½æ±‚é«˜å¬å›ç‡æ™‚çš„æ­£å¸¸ä»£åƒ¹ã€‚å»ºè­°åœ¨å¯¦éš›éƒ¨ç½²æ™‚ï¼Œå°‡ **Confidence Threshold (ä¿¡å¿ƒé–¾å€¼)** å¾é è¨­çš„ 0.25 æå‡è‡³ **0.35\~0.40**ï¼Œå³å¯æœ‰æ•ˆéæ¿¾èª¤å ±ï¼ŒåŒæ™‚ä¿ç•™é«˜å®šä½ç²¾åº¦çš„å„ªå‹¢ã€‚

-----

## 4\. çµè«–èˆ‡æ¨¡å‹é¸æ“‡å»ºè­°

æ ¹æ“šæ‡‰ç”¨å ´æ™¯çš„ä¸åŒéœ€æ±‚ï¼Œæˆ‘å€‘å»ºè­°æ¡ç”¨ä»¥ä¸‹ç­–ç•¥ï¼š

### ğŸ† æ–¹æ¡ˆä¸€ï¼šé€šç”¨ç›£æ§ (General Surveillance) -\> ä½¿ç”¨ **Round 2**

  * **ç†ç”±**ï¼šåœ¨ Precisionã€Recall èˆ‡ mAP ä¹‹é–“å–å¾—äº†æœ€ä½³å¹³è¡¡ã€‚
  * **ç‰¹æ€§**ï¼šèª¤å ±æ¥µå°‘ï¼Œä¸”æ¯” Baseline æ›´å¼·å¥ã€‚

### ğŸ¯ æ–¹æ¡ˆäºŒï¼šä¸»å‹•é©…é›¢/é«˜ç²¾åº¦ç„æº– (Active Defense) -\> ä½¿ç”¨ **Round 3**

  * **ç†ç”±**ï¼šæ“æœ‰å…¨ç³»åˆ—æœ€é«˜çš„ **mAP@50-95 (0.736)** èˆ‡ **Recall (0.882)**ã€‚
  * **ç‰¹æ€§**ï¼šç¢ºä¿æœ€å¤§ç¨‹åº¦é–å®šç›®æ¨™ï¼Œå¯¦ç¾ã€Œå¯§å¯éŒ¯æ®ºï¼ˆå†éæ¿¾ï¼‰ï¼Œä¸å¯æ”¾éã€çš„é˜²è­·ç›®æ¨™ã€‚

-----

## é™„éŒ„ Aï¼šè¦–è¦ºåŒ–æ¯”å°ç¨‹å¼ (Python Script)

æ­¤è…³æœ¬ç”¨æ–¼ä¸¦æ’é¡¯ç¤ºã€ŒåŸºæº–ç·šæ¨¡å‹ã€èˆ‡ã€ŒåŠç›£ç£ Round 3 æ¨¡å‹ã€çš„æ¨è«–çµæœï¼Œä»¥ä¾¿ç›´è§€è©•ä¼°å·®ç•°ã€‚

```python
import cv2
import numpy as np
from ultralytics import YOLO

# ================= è¨­å®šå€ =================
# è«‹ä¾æ“šå¯¦éš›è·¯å¾‘ä¿®æ”¹
MODEL_A_PATH = 'runs/train/dawn_supervised_s_v1/weights/best.pt'  # Baseline
MODEL_B_PATH = 'runs/train/dawn_semi_round3/weights/best.pt'      # Semi-SL Round 3 (æˆ– .engine æª”)
VIDEO_SOURCE = 'datasets/wildlife/test_video.mp4'                 # æ¸¬è©¦å½±ç‰‡è·¯å¾‘ (0 ä»£è¡¨ Webcam)

# ä¿¡å¿ƒé–¾å€¼å»ºè­°è¨­ç‚º 0.35 ä»¥éæ¿¾ Round 3 çš„è¼•å¾®èª¤å ±
CONF_THRESHOLD = 0.35
# ==========================================

def main():
    # 1. è¼‰å…¥æ¨¡å‹
    print(f"æ­£åœ¨è¼‰å…¥æ¨¡å‹ A: {MODEL_A_PATH}...")
    model_a = YOLO(MODEL_A_PATH)
    print(f"æ­£åœ¨è¼‰å…¥æ¨¡å‹ B: {MODEL_B_PATH}...")
    model_b = YOLO(MODEL_B_PATH)

    # 2. é–‹å•Ÿå½±ç‰‡ä¾†æº
    cap = cv2.VideoCapture(VIDEO_SOURCE)
    if not cap.isOpened():
        print(f"éŒ¯èª¤ï¼šç„¡æ³•é–‹å•Ÿå½±ç‰‡ä¾†æº {VIDEO_SOURCE}")
        return

    # è¨­å®šè¦–çª—
    window_name = "Left: Baseline | Right: Semi-SL Round 3"
    cv2.namedWindow(window_name, cv2.WINDOW_NORMAL)

    print("é–‹å§‹æ¨è«–...æŒ‰ 'q' éµé›¢é–‹")

    while cap.isOpened():
        ret, frame = cap.read()
        if not ret:
            break

        # 3. æ¨¡å‹æ¨è«– (verbose=False æ¸›å°‘çµ‚ç«¯æ©Ÿè¼¸å‡º)
        results_a = model_a.predict(frame, conf=CONF_THRESHOLD, verbose=False)
        results_b = model_b.predict(frame, conf=CONF_THRESHOLD, verbose=False)

        # 4. ç¹ªè£½çµæœ
        annotated_frame_a = results_a[0].plot()
        annotated_frame_b = results_b[0].plot()

        # åŠ ä¸Šæ¨™ç±¤æ–‡å­—
        cv2.putText(annotated_frame_a, "Baseline (Supervised)", (30, 50), 
                    cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 0, 255), 2, cv2.LINE_AA)
        cv2.putText(annotated_frame_b, "Semi-SL Round 3", (30, 50), 
                    cv2.FONT_HERSHEY_SIMPLEX, 1, (0, 255, 0), 2, cv2.LINE_AA)

        # 5. å·¦å³æ‹¼æ¥ç•«é¢
        combined_frame = np.hstack((annotated_frame_a, annotated_frame_b))

        # é¡¯ç¤º
        cv2.imshow(window_name, combined_frame)

        if cv2.waitKey(1) & 0xFF == ord('q'):
            break

    cap.release()
    cv2.destroyAllWindows()

if __name__ == "__main__":
    main()
```

-----

## é™„éŒ„ Bï¼šæ¨¡å‹å°å‡ºèˆ‡éƒ¨ç½² (Deployment)

ç‚ºäº†åœ¨ **NVIDIA RTX 5090** ä¸Šç²å¾—æ¥µè‡´çš„æ¨è«–é€Ÿåº¦ï¼Œå¼·çƒˆå»ºè­°å°‡æ¨¡å‹è½‰æ›ç‚º **TensorRT (.engine)** æ ¼å¼ã€‚

### 1\. å°å‡ºæŒ‡ä»¤ (Export to TensorRT)

åœ¨çµ‚ç«¯æ©ŸåŸ·è¡Œä»¥ä¸‹æŒ‡ä»¤ï¼š

```bash
yolo export model=runs/train/dawn_semi_round3/weights/best.pt format=engine half=True device=0 simplify=True
```

  * `format=engine`: è½‰æ›ç‚º TensorRT å¼•æ“ã€‚
  * `half=True`: é–‹å•Ÿ FP16 åŠç²¾åº¦é‹ç®—ï¼ˆRTX 50 Series æ”¯æ´æ¥µä½³ï¼Œé€Ÿåº¦å¿«ä¸”ç²¾åº¦å¹¾ä¹ç„¡æï¼‰ã€‚
  * `simplify=True`: å„ªåŒ–æ¨¡å‹çµæ§‹ã€‚

### 2\. é æœŸæ•ˆèƒ½

  * **PyTorch (.pt)**: æ¨™æº–é€Ÿåº¦ã€‚
  * **TensorRT (.engine)**: é è¨ˆå¯æå‡ **3\~5 å€** æ¨è«–é€Ÿåº¦ (FPS)ï¼Œå¤§å¹…é™ä½å»¶é²ã€‚

### 3\. ä½¿ç”¨æ–¹å¼

è½‰æ›å®Œæˆå¾Œæœƒç”¢ç”Ÿ `best.engine` æª”æ¡ˆã€‚åœ¨ Python ç¨‹å¼ç¢¼ä¸­ï¼Œç›´æ¥å°‡æ¨¡å‹è·¯å¾‘æŒ‡å‘è©²æª”æ¡ˆå³å¯ï¼š

```python
model = YOLO('runs/train/dawn_semi_round3/weights/best.engine')
```